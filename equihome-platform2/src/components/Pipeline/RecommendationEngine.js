import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { CheckCircle, AlertTriangle, DollarSign, TrendingUp, Target, Shield } from 'lucide-react';
import { useFundParameters } from '../../store/fundParameters';
import { pipelineDeals } from '../../data/pipelineData';
const RecommendationEngine = () => {
    const { targetIRR, maxLTV, remainingAllocation } = useFundParameters();
    // Filter deals based on fund parameters
    const recommendedDeals = pipelineDeals.filter(deal => deal.loanRequest.ltv <= maxLTV &&
        deal.returns.forecastedIrr >= targetIRR &&
        deal.underwriteScore >= 80);
    // Calculate total recommended volume
    const totalRecommendedVolume = recommendedDeals.reduce((sum, deal) => sum + deal.loanRequest.amount, 0);
    // Calculate average metrics
    const averageIRR = recommendedDeals.reduce((sum, deal) => sum + deal.returns.forecastedIrr, 0) / (recommendedDeals.length || 1);
    const averageScore = recommendedDeals.reduce((sum, deal) => sum + deal.underwriteScore, 0) / (recommendedDeals.length || 1);
    return (_jsxs("div", { className: "space-y-8", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [_jsx("div", { className: "bg-white rounded-lg shadow-sm p-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Recommended Deals" }), _jsx("p", { className: "text-2xl font-semibold mt-1", children: recommendedDeals.length }), _jsx("p", { className: "text-sm text-gray-500", children: "High-quality opportunities" })] }), _jsx(Target, { className: "h-8 w-8 text-blue-600" })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow-sm p-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Total Volume" }), _jsxs("p", { className: "text-2xl font-semibold mt-1", children: ["$", (totalRecommendedVolume / 1000000).toFixed(1), "M"] }), _jsxs("p", { className: "text-sm text-gray-500", children: ["vs $", (remainingAllocation / 1000000).toFixed(1), "M available"] })] }), _jsx(DollarSign, { className: "h-8 w-8 text-green-600" })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow-sm p-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Average IRR" }), _jsxs("p", { className: "text-2xl font-semibold mt-1", children: [averageIRR.toFixed(1), "%"] }), _jsxs("p", { className: "text-sm text-gray-500", children: ["vs ", targetIRR, "% target"] })] }), _jsx(TrendingUp, { className: "h-8 w-8 text-yellow-600" })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow-sm p-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Average Score" }), _jsx("p", { className: "text-2xl font-semibold mt-1", children: averageScore.toFixed(1) }), _jsx("p", { className: "text-sm text-gray-500", children: "Quality threshold: 80" })] }), _jsx(Shield, { className: "h-8 w-8 text-purple-600" })] }) })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm p-6", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-6", children: "Top Recommendations" }), _jsx("div", { className: "space-y-6", children: recommendedDeals.slice(0, 5).map((deal) => (_jsxs("div", { className: "bg-gray-50 p-4 rounded-lg", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { className: "flex items-center", children: [_jsx(CheckCircle, { className: "h-5 w-5 text-green-600 mr-2" }), _jsx("h4", { className: "font-medium text-gray-900", children: deal.propertyDetails.address })] }), _jsxs("span", { className: "text-sm font-medium text-gray-600", children: ["Score: ", deal.underwriteScore] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4 mt-4", children: [_jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-600", children: "Property Value" }), _jsxs("div", { className: "font-medium", children: ["$", (deal.propertyDetails.currentValue / 1000000).toFixed(1), "M"] })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-600", children: "Loan Amount" }), _jsxs("div", { className: "font-medium", children: ["$", (deal.loanRequest.amount / 1000000).toFixed(1), "M"] })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-600", children: "LTV" }), _jsxs("div", { className: "font-medium", children: [deal.loanRequest.ltv.toFixed(1), "%"] })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-600", children: "Projected IRR" }), _jsxs("div", { className: "font-medium", children: [deal.returns.forecastedIrr.toFixed(1), "%"] })] })] }), _jsxs("div", { className: "mt-4", children: [_jsxs("div", { className: "flex items-center text-sm text-gray-600", children: [_jsx(AlertTriangle, { className: "h-4 w-4 mr-1 text-yellow-600" }), "Key Considerations"] }), _jsxs("ul", { className: "mt-2 text-sm text-gray-600 space-y-1", children: [_jsxs("li", { children: ["\u2022 Risk Adjustment: ", deal.propertyDetails.riskAdjustment, "%"] }), _jsxs("li", { children: ["\u2022 Growth Rate: ", deal.propertyDetails.forecastedGrowthRate, "%"] }), _jsxs("li", { children: ["\u2022 Borrower Income: $", deal.borrowerDetails.income.toLocaleString()] })] })] })] }, deal.id))) })] })] }));
};
export default RecommendationEngine;
